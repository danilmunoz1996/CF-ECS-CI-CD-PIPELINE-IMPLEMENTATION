{"version":3,"file":"index.js","names":["process","env","MONGODB_URI","err","Error","logger","warn","message","app","express","mongoose","connect","config","uri","useNewUrlParser","useUnifiedTopology","console","error","Promise","global","use","morgan","json","urlencoded","extended","get","req","res","send","post","Authentication","signup","signin","Middlewares","loginRequired","UserRouter","next","status","port","PORT","http","createServer","listen","info"],"sources":["../src/index.js"],"sourcesContent":["import http from 'http';\nimport express from 'express';\nimport morgan from 'morgan';\nimport mongoose from 'mongoose';\n//import cors from 'cors';\nimport logger from './util/logger';\nimport config from './config';\nimport Middlewares from './api/middlewares'\nimport Authentication from './api/authentication'\nimport UserRouter from './user/router'\n\nif(!process.env.MONGODB_URI) {\n    const err = new Error('No JWT_SECRET in env variable, check instructions: https://github.com/amazingandyyy/mern#prepare-your-secret');\n    logger.warn(err.message);\n}\n\nconst app = express();\n\nmongoose.connect(config.mongoose.uri, { useNewUrlParser: true, useUnifiedTopology: true })\n.catch(err=>console.error(err));\n\nmongoose.Promise = global.Promise;\n\n// App Setup\n/*\napp.use(cors({\n    origin: ['http://localhost:5000']\n}));\n*/\napp.use(morgan('dev'));\napp.use(express.json())\napp.use(express.urlencoded({ extended: false }));\napp.get('/ping', (req, res) => res.send('pong'))\napp.post('/signup', Authentication.signup)\napp.post('/signin', Authentication.signin)\napp.get('/auth-ping', Middlewares.loginRequired, (req, res) => res.send('connected'))\napp.use('/user', Middlewares.loginRequired, UserRouter)\n\napp.use((err, req, res, next) => {\n    logger.error(err.message);\n    res.status(422).json(err.message);\n});\n\n// Server Setup\nconst port = process.env.PORT || 8000\nhttp.createServer(app).listen(port, ()=>{\n    logger.info(`Server listening on: ${port}`)\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAsC;AALtC;;AAOA,IAAG,CAACA,OAAO,CAACC,GAAG,CAACC,WAAW,EAAE;EACzB,IAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,8GAA8G,CAAC;EACrIC,kBAAM,CAACC,IAAI,CAACH,GAAG,CAACI,OAAO,CAAC;AAC5B;AAEA,IAAMC,GAAG,GAAG,IAAAC,mBAAO,GAAE;AAErBC,oBAAQ,CAACC,OAAO,CAACC,kBAAM,CAACF,QAAQ,CAACG,GAAG,EAAE;EAAEC,eAAe,EAAE,IAAI;EAAEC,kBAAkB,EAAE;AAAK,CAAC,CAAC,SACpF,CAAC,UAAAZ,GAAG;EAAA,OAAEa,OAAO,CAACC,KAAK,CAACd,GAAG,CAAC;AAAA,EAAC;AAE/BO,oBAAQ,CAACQ,OAAO,GAAGC,MAAM,CAACD,OAAO;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACAV,GAAG,CAACY,GAAG,CAAC,IAAAC,kBAAM,EAAC,KAAK,CAAC,CAAC;AACtBb,GAAG,CAACY,GAAG,CAACX,mBAAO,CAACa,IAAI,EAAE,CAAC;AACvBd,GAAG,CAACY,GAAG,CAACX,mBAAO,CAACc,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CAAC,CAAC;AAChDhB,GAAG,CAACiB,GAAG,CAAC,OAAO,EAAE,UAACC,GAAG,EAAEC,GAAG;EAAA,OAAKA,GAAG,CAACC,IAAI,CAAC,MAAM,CAAC;AAAA,EAAC;AAChDpB,GAAG,CAACqB,IAAI,CAAC,SAAS,EAAEC,0BAAc,CAACC,MAAM,CAAC;AAC1CvB,GAAG,CAACqB,IAAI,CAAC,SAAS,EAAEC,0BAAc,CAACE,MAAM,CAAC;AAC1CxB,GAAG,CAACiB,GAAG,CAAC,YAAY,EAAEQ,uBAAW,CAACC,aAAa,EAAE,UAACR,GAAG,EAAEC,GAAG;EAAA,OAAKA,GAAG,CAACC,IAAI,CAAC,WAAW,CAAC;AAAA,EAAC;AACrFpB,GAAG,CAACY,GAAG,CAAC,OAAO,EAAEa,uBAAW,CAACC,aAAa,EAAEC,kBAAU,CAAC;AAEvD3B,GAAG,CAACY,GAAG,CAAC,UAACjB,GAAG,EAAEuB,GAAG,EAAEC,GAAG,EAAES,IAAI,EAAK;EAC7B/B,kBAAM,CAACY,KAAK,CAACd,GAAG,CAACI,OAAO,CAAC;EACzBoB,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACf,IAAI,CAACnB,GAAG,CAACI,OAAO,CAAC;AACrC,CAAC,CAAC;;AAEF;AACA,IAAM+B,IAAI,GAAGtC,OAAO,CAACC,GAAG,CAACsC,IAAI,IAAI,IAAI;AACrCC,gBAAI,CAACC,YAAY,CAACjC,GAAG,CAAC,CAACkC,MAAM,CAACJ,IAAI,EAAE,YAAI;EACpCjC,kBAAM,CAACsC,IAAI,gCAAyBL,IAAI,EAAG;AAC/C,CAAC,CAAC"}