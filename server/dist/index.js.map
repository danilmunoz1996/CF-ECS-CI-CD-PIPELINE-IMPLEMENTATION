{"version":3,"file":"index.js","names":["process","env","MONGODB_URI","err","Error","logger","warn","message","app","express","mongoose","connect","config","uri","useNewUrlParser","useUnifiedTopology","console","error","Promise","global","use","cors","origin","morgan","json","urlencoded","extended","get","req","res","send","post","Authentication","signup","signin","Middlewares","loginRequired","UserRouter","next","status","port","PORT","http","createServer","listen","info"],"sources":["../src/index.js"],"sourcesContent":["import http from 'http';\nimport express from 'express';\nimport morgan from 'morgan';\nimport mongoose from 'mongoose';\nimport cors from 'cors';\nimport logger from './util/logger';\nimport config from './config';\nimport Middlewares from './api/middlewares'\nimport Authentication from './api/authentication'\nimport UserRouter from './user/router'\n\nif(!process.env.MONGODB_URI) {\n    const err = new Error('No JWT_SECRET in env variable, check instructions: https://github.com/amazingandyyy/mern#prepare-your-secret');\n    logger.warn(err.message);\n}\n\nconst app = express();\n\nmongoose.connect(config.mongoose.uri, { useNewUrlParser: true, useUnifiedTopology: true })\n.catch(err=>console.error(err));\n\nmongoose.Promise = global.Promise;\n\n// App Setup\napp.use(cors({\n    origin: ['http://127.0.0.1:3000']\n}));\napp.use(morgan('dev'));\napp.use(express.json())\napp.use(express.urlencoded({ extended: false }));\napp.get('/ping', (req, res) => res.send('pong'))\napp.post('/signup', Authentication.signup)\napp.post('/signin', Authentication.signin)\napp.get('/auth-ping', Middlewares.loginRequired, (req, res) => res.send('connected'))\napp.use('/user', Middlewares.loginRequired, UserRouter)\n\napp.use((err, req, res, next) => {\n    logger.error(err.message);\n    res.status(422).json(err.message);\n});\n\n// Server Setup\nconst port = process.env.PORT || 8000\nhttp.createServer(app).listen(port, ()=>{\n    logger.info(`Server listening on: ${port}`)\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAsC;AAEtC,IAAG,CAACA,OAAO,CAACC,GAAG,CAACC,WAAW,EAAE;EACzB,IAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,8GAA8G,CAAC;EACrIC,kBAAM,CAACC,IAAI,CAACH,GAAG,CAACI,OAAO,CAAC;AAC5B;AAEA,IAAMC,GAAG,GAAG,IAAAC,mBAAO,GAAE;AAErBC,oBAAQ,CAACC,OAAO,CAACC,kBAAM,CAACF,QAAQ,CAACG,GAAG,EAAE;EAAEC,eAAe,EAAE,IAAI;EAAEC,kBAAkB,EAAE;AAAK,CAAC,CAAC,SACpF,CAAC,UAAAZ,GAAG;EAAA,OAAEa,OAAO,CAACC,KAAK,CAACd,GAAG,CAAC;AAAA,EAAC;AAE/BO,oBAAQ,CAACQ,OAAO,GAAGC,MAAM,CAACD,OAAO;;AAEjC;AACAV,GAAG,CAACY,GAAG,CAAC,IAAAC,gBAAI,EAAC;EACTC,MAAM,EAAE,CAAC,uBAAuB;AACpC,CAAC,CAAC,CAAC;AACHd,GAAG,CAACY,GAAG,CAAC,IAAAG,kBAAM,EAAC,KAAK,CAAC,CAAC;AACtBf,GAAG,CAACY,GAAG,CAACX,mBAAO,CAACe,IAAI,EAAE,CAAC;AACvBhB,GAAG,CAACY,GAAG,CAACX,mBAAO,CAACgB,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CAAC,CAAC;AAChDlB,GAAG,CAACmB,GAAG,CAAC,OAAO,EAAE,UAACC,GAAG,EAAEC,GAAG;EAAA,OAAKA,GAAG,CAACC,IAAI,CAAC,MAAM,CAAC;AAAA,EAAC;AAChDtB,GAAG,CAACuB,IAAI,CAAC,SAAS,EAAEC,0BAAc,CAACC,MAAM,CAAC;AAC1CzB,GAAG,CAACuB,IAAI,CAAC,SAAS,EAAEC,0BAAc,CAACE,MAAM,CAAC;AAC1C1B,GAAG,CAACmB,GAAG,CAAC,YAAY,EAAEQ,uBAAW,CAACC,aAAa,EAAE,UAACR,GAAG,EAAEC,GAAG;EAAA,OAAKA,GAAG,CAACC,IAAI,CAAC,WAAW,CAAC;AAAA,EAAC;AACrFtB,GAAG,CAACY,GAAG,CAAC,OAAO,EAAEe,uBAAW,CAACC,aAAa,EAAEC,kBAAU,CAAC;AAEvD7B,GAAG,CAACY,GAAG,CAAC,UAACjB,GAAG,EAAEyB,GAAG,EAAEC,GAAG,EAAES,IAAI,EAAK;EAC7BjC,kBAAM,CAACY,KAAK,CAACd,GAAG,CAACI,OAAO,CAAC;EACzBsB,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACf,IAAI,CAACrB,GAAG,CAACI,OAAO,CAAC;AACrC,CAAC,CAAC;;AAEF;AACA,IAAMiC,IAAI,GAAGxC,OAAO,CAACC,GAAG,CAACwC,IAAI,IAAI,IAAI;AACrCC,gBAAI,CAACC,YAAY,CAACnC,GAAG,CAAC,CAACoC,MAAM,CAACJ,IAAI,EAAE,YAAI;EACpCnC,kBAAM,CAACwC,IAAI,gCAAyBL,IAAI,EAAG;AAC/C,CAAC,CAAC"}