{"version":3,"file":"controller.js","names":["updateProfile","req","res","next","user","comparedPassword","body","password","err","good","status","send","userId","_id","newProfile","name","first","firstName","last","lastName","email","phone","UserModel","findByIdAndUpdate","then","sendStatus"],"sources":["../../src/user/controller.js"],"sourcesContent":["import UserModel from './model';\n\nexport default {\n    updateProfile: (req, res, next) => {\n        req.user.comparedPassword(req.body.password, (err, good) => {\n            if (err || !good) return res.status(401).send(err || 'Incorrect Password')\n            const userId = req.user._id;\n            const newProfile = {\n                name: {\n                    first: req.body.firstName, \n                    last: req.body.lastName\n                }\n            };\n            delete newProfile.email;\n            delete newProfile.phone;\n            delete newProfile.password;\n            \n            UserModel.findByIdAndUpdate(userId, newProfile, {new: true})\n            .then(() => res.sendStatus(200))\n            .catch(next)\n        })\n    }\n    \n}\n"],"mappings":";;;;;;AAAA;AAAgC;AAAA,eAEjB;EACXA,aAAa,EAAE,uBAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;IAC/BF,GAAG,CAACG,IAAI,CAACC,gBAAgB,CAACJ,GAAG,CAACK,IAAI,CAACC,QAAQ,EAAE,UAACC,GAAG,EAAEC,IAAI,EAAK;MACxD,IAAID,GAAG,IAAI,CAACC,IAAI,EAAE,OAAOP,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,GAAG,IAAI,oBAAoB,CAAC;MAC1E,IAAMI,MAAM,GAAGX,GAAG,CAACG,IAAI,CAACS,GAAG;MAC3B,IAAMC,UAAU,GAAG;QACfC,IAAI,EAAE;UACFC,KAAK,EAAEf,GAAG,CAACK,IAAI,CAACW,SAAS;UACzBC,IAAI,EAAEjB,GAAG,CAACK,IAAI,CAACa;QACnB;MACJ,CAAC;MACD,OAAOL,UAAU,CAACM,KAAK;MACvB,OAAON,UAAU,CAACO,KAAK;MACvB,OAAOP,UAAU,CAACP,QAAQ;MAE1Be,iBAAS,CAACC,iBAAiB,CAACX,MAAM,EAAEE,UAAU,EAAE;QAAC,OAAK;MAAI,CAAC,CAAC,CAC3DU,IAAI,CAAC;QAAA,OAAMtB,GAAG,CAACuB,UAAU,CAAC,GAAG,CAAC;MAAA,EAAC,SAC1B,CAACtB,IAAI,CAAC;IAChB,CAAC,CAAC;EACN;AAEJ,CAAC;AAAA"}